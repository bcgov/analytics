<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Snowplow Custom Events Example</title>
    <script src="https://www2.gov.bc.ca/StaticWebResources/static/shared/scripts/jquery/jquery-1.11.1.min.js"></script>
  </head>


  <body>
    <header>
      <h3>Snowplow Custom CleanBC Events</h3>
    </header>
<p>Look at the HTML source for examples of Snowplow events</p>
<script type="text/javascript">
jQuery(document).ready(function() {
    ;(function(p,l,o,w,i,n,g){if(!p[i]){p.GlobalSnowplowNamespace=p.GlobalSnowplowNamespace||[];
    p.GlobalSnowplowNamespace.push(i);p[i]=function(){(p[i].q=p[i].q||[]).push(arguments)
    };p[i].q=p[i].q||[];n=l.createElement(o);g=l.getElementsByTagName(o)[0];n.async=1;
    n.src=w;g.parentNode.insertBefore(n,g)}}(window,document,"script","https://sp-js.apps.gov.bc.ca/aubjyAzCUz7dJwqdbH3cMi45LjI.js","snowplow"));
    var collector = 'spm.gov.bc.ca';
    window.snowplow('newTracker','rt',collector, {
        appId: "Snowplow_standalone",
        platform: 'web',
        post: true,
        forceSecureTracker: true,
        contexts: {
            webPage: true,
            performanceTiming: true
        }
    });
    window.snowplow('enableActivityTracking', 30, 30); // Ping every 30 seconds after 30 seconds
    window.snowplow('enableLinkClickTracking', null, true);
    window.snowplow('trackPageView');
    
    // Send a hover over "Renovating a home"
    window.snowplow('trackSelfDescribingEvent', {
      schema: 'iglu:ca.bc.gov.cleanbc/entry/jsonschema/1-0-0',
      data: {
        action: "hover",
        area: "Renovating a home"
      }
    });

    // Send a click on "Building a home"
    window.snowplow('trackSelfDescribingEvent', {
      schema: 'iglu:ca.bc.gov.cleanbc/entry/jsonschema/1-0-0',
      data: {
        action: "click",
        area: "Building a home "
      }
    });

    // Send a select event for picking a project type from the Rebate Search Tool
    window.snowplow('trackSelfDescribingEvent', {
      schema: 'iglu:ca.bc.gov.cleanbc/rst/jsonschema/1-0-0',
      data: {
        action: "change",
        element_type: "project",
        project_type: "Building a home"
      }
    });

    // Next select a location
    window.snowplow('trackSelfDescribingEvent', {
      schema: 'iglu:ca.bc.gov.cleanbc/rst/jsonschema/1-0-0',
      data: {
        action: "change",
        element_type: "location",
        project_type: "Building a home",
	location: "Victoria"
      }
    });

    // Next select a heating type
    window.snowplow('trackSelfDescribingEvent', {
      schema: 'iglu:ca.bc.gov.cleanbc/rst/jsonschema/1-0-0',
      data: {
        action: "change",
        element_type: "heating",
        project_type: "Building a home",
	location: "Victoria",
	heating_type: "Natural Gas or Propane"
      }
    });

    // Next hit Submit
    window.snowplow('trackSelfDescribingEvent', {
      schema: 'iglu:ca.bc.gov.cleanbc/rst/jsonschema/1-0-0',
      data: {
        action: "submit",
        element_type: "submit",
        project_type: "Building a home",
	location: "Victoria",
	heating_type: "Natural Gas or Propane"
      }
    });

    // Add a filter checkbox
    window.snowplow('trackSelfDescribingEvent', {
      schema: 'iglu:ca.bc.gov.cleanbc/rst/jsonschema/1-0-0',
      data: {
        action: "select",
        element_type: "filter",
        project_type: "Building a home",
	location: "Victoria",
	heating_type: "Natural Gas or Propane",
	filter_values: ["Heating"],
	label: "Heating"
      }
    });

    // Add click on an incentive
    window.snowplow('trackSelfDescribingEvent', {
      schema: 'iglu:ca.bc.gov.cleanbc/rst/jsonschema/1-0-0',
      data: {
        action: "click",
        element_type: "incentive",
        project_type: "Building a home",
	location: "Victoria",
	heating_type: "Natural Gas or Propane",
	filter_values: ["Heating"],
	label: "Central Air Source Heat Pump Rebate",
	rebate: "$1,200 - $3,000"
      }
    });


});
</script>
</body>
</html>
